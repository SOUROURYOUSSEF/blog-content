---
layout: post
title: "When not to use WPA and (P)EAP"
date: 2007-08-02
comments: false
categories:
 - wifi
---

<div class='post'>
As most people know, WEP is a very poor algorithm for securing your wireless network. For a long time I have used WPA2 Personal at home in a WDS network (four AP's). WDS stands for Wireless Distribution System and allows for interconnection between access points. This way you can have unwired AP's to also function in your network as supporting systems. Handover between AP's when you walk happen without interference to the user<br /><br />But at work they still used WEP. Almost unbelievable... so a few days ago I had changed it to a setup with two AP's in a WDS and WPA (with DD-WRT as the firmware). For added security we also decided to give RADIUS a try. Today <a href="http://www.svenlandgraf.nl/">Sven</a> and I tried it Windows 2003's IAS and the security on the AP's set to WPA Radius. This way laptops have to authenticate against Active Directory with their domain credentials. We closely followed the instructions as mentioned on <a href="http://franktank.com/blog/windows-server-2003/setting-up-a-wireless-network-with-windows-server-2003-and-peapeap/">this page</a>.<br /><br />Notebooks don't seem to have any difficulty to connect; Windows XP needs the authentication set to 'Protected EAP'. When you don't your eventlog of IAS will fill up with errors almost 16 times every second when the client tries to connect. Vista had no issues as also Mac OS X. Some clients which are not in the domain had hiccups (needed the server root certificate) and issues with trigger-happy wireless drivers. All in all, for a large wireless network this is the way to go: very secure due to WPA Enterprise.<br /><br />Although it might seem like a good choice, there is a big BUT. When you have small devices connecting to your network, expect to have a full day of issue management. We had two HTC phone with Windows Mobile who refused to connect. We installed the certificate over Bluetooth... used the format 'DOMAIN\username' for the username and left the domain field empty. When they were able to connect, they didn't open any internet website. When this happens be sure you set the correct connection for using internet. Windows Mobile is so NOT user intuitive :-/. I quite got lost in the menu structure. In the end... many devices were not able to connect. From telephones with WLAN (Nokia E60, Nokia N95) to my Nokia 770 internet tablet. The Nokia 770 did install the certificate with no way to select it in the wireless settings.<br /><br />Eventually we decided that this is not the way to go... the configuration is to cumbersome. Every time you change your domain password, you also have to reconfigure the settings for all smart devices. Until now I haven't found a way to easily configure those devices. Perhaps if we can also use Nokia client provisioning using OMA and manage Windows Mobile devices. It is certainly not usable for home... I don't know if my Apple TV can even use WPA with EAP, let alone the PlayStation Portable.<br /><br />Conclusion: use WPA and (P)EAP in a large scale network when you can also make the compromise 'no small devices'.</div>
